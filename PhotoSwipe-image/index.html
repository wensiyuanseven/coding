<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <!-- Core CSS file -->
        <link rel="stylesheet" href="./dist/photoswipe.css" />
        <!-- Skin CSS file (styling of UI - buttons, caption, etc.)
     In the folder of skin CSS file there are also:
     - .png and .svg icons sprite, 
     - preloader.gif (for browsers that do not support CSS animations) -->
        <link rel="stylesheet" href="./dist/default-skin/default-skin.css" />

        <!-- Core JS file -->
        <script src="./dist/photoswipe.js"></script>

        <!-- UI JS file -->
        <script src="./dist/photoswipe-ui-default.min.js"></script>
        <style>
            #btnZ {
                background-position: -94px 0;
                color: #ffffff;
            }
        </style>
    </head>
    <body>
        <button id="btn">Open PhotoSwipe</button>

        <!-- Root element of PhotoSwipe. Must have class pswp. -->
        <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
            <!-- Background of PhotoSwipe. 
         It's a separate element, as animating opacity is faster than rgba(). -->
            <div class="pswp__bg"></div>

            <!-- Slides wrapper with overflow:hidden. -->
            <div class="pswp__scroll-wrap">
                <!-- Container that holds slides. PhotoSwipe keeps only 3 slides in DOM to save memory. -->
                <div class="pswp__container">
                    <!-- don't modify these 3 pswp__item elements, data is added later on -->
                    <div class="pswp__item"></div>
                    <div class="pswp__item"></div>
                    <div class="pswp__item"></div>
                </div>

                <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
                <div class="pswp__ui pswp__ui--hidden">
                    <div class="pswp__top-bar">
                        <!--  Controls are self-explanatory. Order can be changed. -->

                        <div class="pswp__counter"></div>

                        <button
                            class="pswp__button pswp__button--close"
                            title="Close (Esc)"
                        ></button>

                        <!-- <button
                            class="pswp__button pswp__button--share"
                            title="Share"
                        ></button> -->

                        <!-- <button
                            class="pswp__button pswp__button--fs"
                            title="Toggle fullscreen"
                        ></button> -->

                        <button
                            class="pswp__button pswp__button--zoom"
                            title="Zoom in/out"
                        ></button>
                        <button id="btnZ" class="pswp__button">点击</button>
                        <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                        <!-- element will get class pswp__preloader--active when preloader is running -->
                        <div class="pswp__preloader">
                            <div class="pswp__preloader__icn">
                                <div class="pswp__preloader__cut">
                                    <div class="pswp__preloader__donut"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div
                        class="
                            pswp__share-modal
                            pswp__share-modal--hidden
                            pswp__single-tap
                        "
                    >
                        <div class="pswp__share-tooltip"></div>
                    </div>

                    <button
                        class="pswp__button pswp__button--arrow--left"
                        title="Previous (arrow left)"
                    ></button>

                    <button
                        class="pswp__button pswp__button--arrow--right"
                        title="Next (arrow right)"
                    ></button>

                    <div class="pswp__caption">
                        <div class="pswp__caption__center"></div>
                    </div>
                </div>
            </div>
        </div>
        <script>
            // var openPhotoSwipe = function () {
            var pswpElement = document.querySelectorAll(".pswp")[0];

            // build items array
            var items = [
                {
                    src: "https://farm2.staticflickr.com/1043/5186867718_06b2e9e551_b.jpg",
                    w: 964,
                    h: 1024,
                },
                // 小于视口时等比例放大二倍
                {
                    src: "https://farm7.staticflickr.com/6175/6176698785_7dee72237e_b.jpg",
                    w: 964,
                    h: 1024,
                },
            ];

            // define options (if needed)
            var options = {
                // history & focus options are disabled on CodePen
                history: false,
                focus: false,
                showAnimationDuration: 0,
                hideAnimationDuration: 0,
                modalL: false,
                clickToCloseNonZoomable: false,
            };

            var gallery = new PhotoSwipe(
                pswpElement,
                PhotoSwipeUI_Default,
                items,
                options
            );
            gallery.init();

            document.getElementById("btnZ").onclick = function () {
                console.log(gallery);
                // 判断缩放等级(如果缩放等级为1 则表示不需要缩放)
                console.log(gallery.getZoomLevel(), gallery.viewportSize);
                // gallery.updateSize(true);
                gallery.applyZoomPan(4);
                // gallery.zoomTo(
                //     4,
                //     { x: gallery.viewportSize.x / 2, y: gallery.viewportSize.y / 2 },
                //     2000,
                //     false,
                //     function (now) {}
                // );
            };
            //             gallery.listen('initialZoomOut', function(ee) {
            // console.log(ee,'---ee--')
            //             });

            // 允许在 down 和 up 事件上调用 preventDefault
            gallery.listen(
                "preventDragEvent",
                function (e, isDown, preventObj) {
                    // e - 原始事件
                    // isDown - true = 拖动开始，false = 拖动释放

                    // 下面的行将强制 e.preventDefault() 开启：
                    // touchstart/mousedown/pointerdown 事件
                    // 以及：
                    // touchend/mouseup/pointerup 事件
                    preventObj.prevent = true;
                }
            );
            // 可以触发点击图片
            gallery.framework.bind(
                gallery.scrollWrap /* bind on any element of gallery */,
                "pswpTap",
                function (e) {
                    console.log("tap", e, e.detail);
                    // e.detail.origEvent  // original event that finished tap (e.g. mouseup or touchend)
                    // e.detail.target // e.target of original event
                    // e.detail.releasePoint // object with x/y coordinates of tap
                    // e.detail.pointerType // mouse, touch, or pen
                }
            );
        </script>
    </body>
</html>

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
    </head>

    <body>
        <script>
            function isPromise(value) {
                if (
                    value !== null &&
                    (typeof value === "object" ||
                        typeof value === "function") &&
                    typeof value.then === "function"
                ) {
                    return true;
                } else {
                    return false;
                }
            }
            Promise.all = function (args) {
                return new Promise((resolve, reject) => {
                    let index = 0;
                    let result = [];
                    function processData(i, data) {
                        result[i] = data;
                        if (++index === args.length) {
                            resolve(result);
                        }
                    }
                    for (let i = 0; i < args.length; i++) {
                        if (isPromise(args[i])) {
                            args[i].then((data) => {
                                processData(i, data);
                            }, reject);
                        } else {
                            processData(i, args[i]);
                        }
                    }
                });
            };
        </script>
    </body>
</html>
